---
sidebar_position: 2
---

# 1장. 깨끗한 코드

<br/>

## 들어가며

---

이 책을 읽는 이유가 있다면 다음 두 가지 중 하나일 것이다.

- 프로그래머라서,
- 더 나은 프로그래머가 되려고,

이 책은 코드에 대해 아주 자세히 다룰 것이며, 그렇기에 읽고 나면 **어떤 코드가 좋은 코드고 나쁜 코드인지 구분하는 능력과 좋은 코드를 작성하는 능력, 나쁜 코드를 좋은 코드로 바꾸는 능력**들을 얻을 것이다.

<br/>

## 코드가 존재하리라

---

코드가 사라질 수도 있다는 사람들로 하여금(그들은 모델이나 요구사항에 집중해야 한다고 생각) 해당 서적은 시대에 뒤떨어지는 주제라고 생각할 수 있다.

- 하지만 코드는 **요구사항을 상세히 표현하는 수단**이기에 사라질 수 없다.
  - 코드의 도움 없이는 불가능하고, **추상화**도 불가능하다.
- 사람들은 요구사항을 모호하게 제시해도 의도를 정확히 꿰뚫는 기계를 원한다.
  - 하지만 이는 불가능한 기대고, 인간 또한 고객의 막연한 감정만으로는 성공적인 시스템을 구현하지 못한다.

궁극적으로 **코드는 요구사항을 표현하는 언어**라는 사실을 명심한다.

- 요구사항에 더 가까운 언어를 만드는 것이나, 요구사항에서 정형 구조를 뽑아내는 도구를 만들 수도 있다.
  - 하지만, 어느 순간에는 **정밀한 표현**이 필요하다.
  - 그 필요를 없앨 이유 또한 없기에, **코드는 사라지지 않으리라.**

<br/>

## 나쁜 코드

---

나쁜 코드를 이야기하기 전에 **좋은 코드가 중요한 이유**를 알아보기 위한 일화를 들어보자.

> 80년대 초, 킬러앱을 만든 어느 한 회사는 출시 이후, 제품 출시 간격이 계속 늘어지기 시작하더니 버그가 버전을 넘어서면서도 계속 잔존하는 문제가 생겼다. 이후 프로그램 시동 시간과 죽는 횟수도 늘어나며 이를 사용하지 않게 되었다. 이후 회사가 망하고 20년이 지난 뒤, 초창기 직원을 만나 자초지종을 들어보니 출시에 바빠 코드를 마구잡이로 짰고, 결론적으로 **나쁜 코드가 회사를 망하게 했다.**

나쁜 코드를 작성하여 고생한 경험은 다들 하나씩 있을 것이고 이를 **고행**이라고도 한다.

- 온갖 핑계를 대며 미뤄둔 코드는 정상적으로 작동한다는 사실에 스스로를 위로하게 되고 나중에 손보겠다고 했던 생각은 점점 사라져 결국, **나중은 오지 않게 된다.**

<br/>

## 나쁜 코드로 치르는 대가

---

2-3년 넘게 프로그램을 짰다면, 내 코드가 아닌 남들이 저질러놓은 나쁜 코드로 고생한 경험이 있을 것이다. 또한, 이를 통해 프로젝트 진도가 안나가는 것도 경험했을 것이다.

- **나쁜 코드는 개발 속도를 크게 떨어뜨린다.**
  - 나쁜 코드를 통해 팀 생산성이 떨어지고, 그러다 **생산성이 0에 수렴하는 순간**이 온다.
  - 관리층은 이를 복구하기 위해, **새로운 인력을 투입**시킨다.
  - 새로운 인력은 기존 시스템에 대한 이해가 깊지 않기에, **설계 의도 혹은 이에 반하는 변경을 구분하지 못한다.**
  - 새로운 인력은 팀 생산성 증가에 대한 압력에 시달리고, **결국 나쁜 코드를 양산한다.**

<br/>

### 원대한 재설계의 꿈

---

한계에 다다른 팀원들은 재설계를 관리층에게 요구하고, 달갑지는 않지만 생산성의 상황을 알기에 이를 승인한다. 그리고 새로운 재설계를 위한 타이거팀이 생긴다.

- 타이거팀은 **기존 서비스의 기능을 모두 제공**하며, 그동안 **기존 시스템에 가해지는 변경도 모두 따라잡아야 한다.**
  - 기존 시스템의 기능을 제공하지 않는다면, 관리층은 기존 시스템을 대체하지 않기 때문이다.
- 그렇게 진행되는 재설계는 길면 10년까지 이어지고, 초창기 타이거 팀원들은 모두 팀을 떠났으며, 새로운 팀원들이 새로운 서비스를 설계하자고 한다.

이를 통해, 시간을 들여 **깨끗한 코드를 만드는 노력**이 **비용을 절감**하고 이러한 방식이 **전문가로서 살아남는 방식**임을 알게 된다.

### 태도

---

나쁜 코드로 구성된 프로그램의 원인에서 **프로그래머를 제외하는 것은 어렵다.**

- 관리자와 마케팅 팀원들은 우리에게 정보와 현실성을 요구하며, 이를 요구하지 않아도 제공해야 마땅하다.
- 프로젝트 관리자는 일정을 잡으며 우리에게 도움을 요청한다.

그렇기에 우리에게도 커다란 책임이 있다. 나쁜 코드가 초래하는 실패에는 더더욱 책임이 크다.

> "아니 잠깐만요! 상사가 시키는 대로 하지 않으면 짤린다구요!"

그들이 일정과 요구사항을 강력하게 밀어붙이는 이유는 그것이 그들의 책임이기에 그런 것이고, **좋은 코드를 사수하는 일**은 바로 우리 **프로그래머들의 책임**이다.

### 원초적 난제

---

대부분의 프로그래머들이 나쁜 코드가 업무 속도를 늦춘다는 사실을 익히 알지만, 기한을 맞추기 위해 나쁜 코드를 양산할 수 밖에 없다고 느낀다.

- 하지만 전문가들은 나쁜 코드를 양산하는 것이 기한을 맞추지 못하게 하며, 이를 맞추는 유일한 방법은 **언제나 코드를 최대한 깨끗하게 유지하는 습관**이라는 것을 안다.

### 깨끗한 코드라는 예술?

---

나쁜 코드가 심각한 장애물이라는 사실을 알았다고 가정해도, 깨끗한 코드가 무엇인지 모르면 이는 소용이 없는 짓이다.

- 깨끗한 코드를 작성하는 것은 **그림을 그리는 것**과 같다.
- 그렇지만, 잘 그린 그림을 구분하는 능력과 잘 그리는 능력과는 다른 것처럼 **깨끗한 코드를 작성하는 것은 다른 맥락이다.**
- 깨끗한 코드를 작성하는 것은 열쇠는 **'코드 감각'**이며, 코드 감각이 있으면 **좋은 코드와 나쁜 코드를 구분**하고 **좋은 코드로 바꾸는 전략도 파악**한다.

다시 말해, 깨끗한 코드를 작성하는 것은 빈 캔버스를 우아한 작품으로 바꾸는 것과 같다.

### 깨끗한 코드란?

---

프로그래머의 수만큼 해당 정의는 다양할 것이다. 필자 주변의 유명하고 노련한 프로그래머들에게 의견을 물었다.

#### 비야네 스트롭스트룹

---

- 우아하고 효율적인 코드
- 버그 방지를 위해 논리를 간단하게 하고, 유지보수를 위해 의존성을 최대한 줄여라.
- 오류는 명백한 전략에 의거해 철저히 처리한다.
- 성능을 최적으로 유지하는 것이, 사람들이 코드를 망치려는 유혹을 떨치는 방법이다.

#### +a) 데이브 토마스와 앤디 헌트

- 창문이 깨진 건물(나쁜 코드)은 아무도 신경 안쓰며, 더 깨져도 신경쓰지 않는다.
- 이후, 낙서를 방치하고 쓰레기가 쌓이며 결국 쇠퇴하는 과정이 시작된다.

#### 그래디 부치

---
